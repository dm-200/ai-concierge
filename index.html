<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hotel&nbsp;Alpenblick&nbsp;AI ‚Äì Digitaler Concierge</title>

    <!-- Dialogflow Messenger -->
    <link rel="stylesheet" href="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/themes/df-messenger-default.css" />
    <script src="https://www.gstatic.com/dialogflow-console/fast/df-messenger/prod/v1/df-messenger.js"></script>

    <style>
      body {
        margin: 0;
        font-family: 'Segoe UI', sans-serif;
        background: url('https://storage.googleapis.com/ai-hotel-concierge/hotel-bg.jpg') no-repeat center center fixed;
        background-size: cover;
        color: white;
        overflow-x: hidden;
      }

      header {
        background-color: rgba(0, 0, 0, 0.6);
        padding: 20px;
        text-align: center;
        font-size: 2.2rem;
        font-weight: bold;
      }

      nav {
        background-color: rgba(0, 0, 0, 0.45);
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 40px;
        padding: 14px;
        font-size: 1.15rem;
      }

      nav a {
        color: #fff;
        text-decoration: none;
        font-weight: 600;
        cursor: pointer;
      }

      nav a:hover {
        text-decoration: underline;
      }

      .section {
        max-width: 800px;
        margin: 40px auto 60px auto;
        background-color: rgba(0, 0, 0, 0.5);
        padding: 28px;
        border-radius: 14px;
        font-size: 1.1rem;
        line-height: 1.6;
        display: none;
      }

      h2 {
        font-size: 1.6rem;
        margin-bottom: 12px;
        color: #fff;
      }

      @media (min-width: 768px) {
        .section {
          margin-right: 400px;
        }
      }

      df-messenger {
        z-index: 999;
        position: fixed;
        bottom: 16px;
        right: 16px;
        --df-messenger-font-color: #000;
        --df-messenger-font-family: 'Segoe UI', sans-serif;
        --df-messenger-chat-background: #f3f6fc;
        --df-messenger-message-user-background: #d3e3fd;
        --df-messenger-message-bot-background: #fff;
        --df-messenger-chat-width: 360px;
        --df-messenger-chat-height: 500px;
      }

      #lang-container {
        margin: 30px auto 0;
        max-width: 300px;
        text-align: center;
      }

      #lang-container select {
        padding: 8px 12px;
        border-radius: 8px;
        font-size: 1rem;
      }

      #lang-container label {
        font-size: 1.05rem;
        font-weight: 600;
        color: #fff;
        display: block;
        margin-bottom: 8px;
      }
    </style>
  </head>

  <body onclick="collapseMessenger(event)">
    <header>HotelAlpenblickAI</header>
    <nav>
      <a onclick="toggleSection('start')">Start</a>
      <a onclick="toggleSection('about')">√úber uns</a>
      <a onclick="toggleSection('contact')">Kontakt</a>
    </nav>

    <!-- Language selection -->
    <div id="lang-container">
      <label for="langSelect">üåç Sprache w√§hlen / Choose your language:</label>
      <select id="langSelect" onchange="launchMessenger(this.value)">
        <option value="">-- Auswahl / Select --</option>
        <option value="de">Deutsch</option>
        <option value="en">English</option>
        <option value="fr">Fran√ßais</option>
        <option value="it">Italiano</option>
        <option value="pl">Polski</option>
      </select>
    </div>

    <div id="start" class="section">
      <h2>Willkommen</h2>
      <p>
        Willkommen im HotelAlpenblickAI ‚Äì Ihrem digitalen Gastgeber in den sanften Weinbergen der Wachau. Nutzen Sie unseren Concierge-Chat rund um die Uhr f√ºr alle Fragen zu Ihrem Aufenthalt.
      </p>
    </div>

    <div id="about" class="section">
      <h2>√úber uns</h2>
      <p>
        Unser fiktives Hotel liegt am Fu√üe der Donauh√§nge, eingebettet in Natur und Stille. Mit moderner Technik und traditionellem Charme begleiten wir Sie durch einen entspannten Aufenthalt ‚Äì digital, pers√∂nlich und stilvoll.
      </p>
    </div>

    <div id="contact" class="section">
      <h2>Kontakt</h2>
      <p>
        Hotel Alpenblick<br />
        Wachauer Stra√üe 12<br />
        3512 Mautern an der Donau<br />
        √ñsterreich<br /><br />
        Telefon: +43 2732 12345<br />
        E-Mail: info@hotelalpenblick.ai
      </p>
    </div>

    <script>
      let lastShown = null;

      function toggleSection(id) {
        const el = document.getElementById(id);
        if (lastShown && lastShown !== el) {
          lastShown.style.display = "none";
        }
        if (el.style.display === "block") {
          el.style.display = "none";
          lastShown = null;
        } else {
          el.style.display = "block";
          lastShown = el;
        }
      }

      function collapseMessenger(event) {
        const messenger = document.querySelector("df-messenger");
        if (!messenger) return;
        if (!messenger.contains(event.target)) {
          const iframe = messenger.shadowRoot?.querySelector("iframe");
          if (iframe) {
            iframe.contentWindow.postMessage({ event: "dfMessengerReset" }, "*");
          }
        }
      }

      const supportedLangs = ['de', 'en', 'fr', 'it', 'pl'];
      const userLang = navigator.language.slice(0, 2);
      const preferredLang = supportedLangs.includes(userLang) ? userLang : 'en';

      window.addEventListener('DOMContentLoaded', () => {
        const dropdown = document.getElementById('langSelect');
        dropdown.value = preferredLang;
        launchMessenger(preferredLang);
      });

      function launchMessenger(langCode) {
        if (!langCode) return;

        const existing = document.querySelector('df-messenger');
        if (existing) existing.remove();

        const messenger = document.createElement('df-messenger');
        messenger.setAttribute('project-id', 'cx-agent-465013');
        messenger.setAttribute('agent-id', '6232d8de-962f-4f8d-8984-d5c7de566d78');
        messenger.setAttribute('location', 'europe-west3');
        messenger.setAttribute('language-code', langCode);
        messenger.setAttribute('allow-feedback', 'all');
        messenger.setAttribute('max-query-length', '-1');

        const bubble = document.createElement('df-messenger-chat-bubble');
        bubble.setAttribute('chat-title', 'HotelAlpenblickAI');
        messenger.appendChild(bubble);

        document.body.appendChild(messenger);

        setTimeout(() => {
          const iframe = messenger.shadowRoot?.querySelector("iframe");
          if (iframe) {
            iframe.contentWindow.postMessage({ event: "dfMessengerOpen" }, "*");
          }
        }, 1200);
      }
    </script>
  </body>
</html>
